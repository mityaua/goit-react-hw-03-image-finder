{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.scss","components/Button/Button.module.scss","components/Modal/Modal.module.scss","components/Searchbar/Searchbar.module.scss","components/ImageGallery/ImageGallery.module.scss","components/Loader/Loader.module.scss","components/Message/Message.module.scss","App.module.scss","components/SearchForm/SearchForm.jsx","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","components/Message/Message.jsx","components/Modal/Modal.jsx","api/api-services.js","App.jsx","index.js","components/SearchForm/SearchForm.module.scss"],"names":["module","exports","SearchFrom","state","query","handleSearchInput","e","currentTarget","name","value","setState","handleSubmit","preventDefault","props","onSearch","resetForm","className","styles","SearchForm","onSubmit","this","type","onChange","autoComplete","autoFocus","placeholder","Component","Searchbar","ImageGalleryItem","image","onImageClick","src","webformatURL","alt","tags","onClick","largeImageURL","defaultProps","ImageGallery","images","map","id","Button","Loader","color","height","width","Message","children","modalRoot","document","querySelector","Modal","handleKeyDown","event","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","Overlay","axios","defaults","baseURL","fetchImages","currentPage","a","get","data","App","searchQuery","isLoading","showModal","largeImage","error","onChangeQuery","getImages","hits","prevState","scrollOnLoadButton","console","log","handleGalleryItem","fullImageUrl","toggleModal","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","needToShowLoadMore","length","style","maxHeight","maxWidth","href","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2018c22f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2_F4I\",\"ImageGalleryItem-image\":\"ImageGalleryItem_ImageGalleryItem-image__1Fupk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button-wrapper\":\"Button_Button-wrapper__331C2\",\"Button\":\"Button_Button__2KFf5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3u0XI\",\"Modal\":\"Modal_Modal__-PfKO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__x91N2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__126uJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__UlGzK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Message\":\"Message_Message__24nKT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2vsp2\",\"foo\":\"App_foo__ebhMT\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './SearchForm.module.scss';\n\nclass SearchFrom extends Component {\n  state = {\n    query: '',\n  };\n\n  handleSearchInput = e => {\n    const { name, value } = e.currentTarget;\n\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    // Запрещает отправку пустого инпута\n    if (!this.state.query) return;\n\n    // Отдать данные внешнему компоненту\n    this.props.onSearch(this.state.query);\n\n    this.resetForm();\n  };\n\n  resetForm = () =>\n    this.setState({\n      query: '',\n    });\n\n  render() {\n    return (\n      <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\n        <button type=\"submit\" className={styles['SearchForm-button']}>\n          <span className={styles['SearchForm-button-label']}>Search</span>\n        </button>\n\n        <input\n          className={styles['SearchForm-input']}\n          type=\"text\"\n          name=\"query\"\n          value={this.state.query}\n          onChange={this.handleSearchInput}\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n        />\n      </form>\n    );\n  }\n}\n\nSearchFrom.propTypes = {\n  onSearch: PropTypes.func.isRequired,\n};\n\nexport default SearchFrom;\n","import PropTypes from 'prop-types';\nimport SearchFrom from '../SearchForm';\n\nimport styles from './Searchbar.module.scss';\n\nconst Searchbar = ({ onSearch }) => {\n  return (\n    <header className={styles.Searchbar}>\n      <SearchFrom onSearch={onSearch} />\n    </header>\n  );\n};\n\nSearchbar.propTypes = {\n  onSearch: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import PropTypes from 'prop-types';\nimport styles from './ImageGalleryItem.module.scss';\n\nconst ImageGalleryItem = ({ image, onImageClick }) => {\n  const fullImage = () => onImageClick(image.largeImageURL);\n\n  return (\n    <li className={styles.ImageGalleryItem}>\n      <img\n        src={image.webformatURL}\n        alt={image.tags}\n        className={styles['ImageGalleryItem-image']}\n        onClick={fullImage}\n      />\n    </li>\n  );\n};\n\nImageGalleryItem.defaultProps = {\n  tags: '',\n};\n\nImageGalleryItem.propTypes = {\n  image: PropTypes.shape({\n    webformatURL: PropTypes.string.isRequired,\n    largeImageURL: PropTypes.string.isRequired,\n    tags: PropTypes.string,\n  }),\n  onImageClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport styles from './ImageGallery.module.scss';\n\nconst ImageGallery = ({ images, onImageClick }) => {\n  return (\n    <ul className={styles.ImageGallery}>\n      {images.map(image => {\n        return (\n          <ImageGalleryItem\n            key={image.id}\n            image={image}\n            onImageClick={onImageClick}\n          />\n        );\n      })}\n    </ul>\n  );\n};\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n    }),\n  ),\n  onImageClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import PropTypes from 'prop-types';\nimport styles from './Button.module.scss';\n\nconst Button = ({ onClick }) => {\n  return (\n    <div className={styles['Button-wrapper']}>\n      <button type=\"button\" className={styles.Button} onClick={onClick}>\n        Load more\n      </button>\n    </div>\n  );\n};\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React, { Component } from 'react';\nimport Template from 'react-loader-spinner';\n\nimport styles from './Loader.module.scss';\n\nclass Loader extends Component {\n  render() {\n    return (\n      <div className={styles.Loader}>\n        <Template type=\"TailSpin\" color=\"#02be6e\" height={100} width={100} />\n      </div>\n    );\n  }\n}\n\nexport default Loader;\n","import PropTypes from 'prop-types';\nimport styles from './Message.module.scss';\n\nconst Message = ({ children }) => {\n  return <div className={styles.Message}>{children}</div>;\n};\n\nMessage.defaultProps = {\n  children: [],\n};\n\nMessage.propTypes = {\n  children: PropTypes.node,\n};\n\nexport default Message;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport styles from './Modal.module.scss';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = event => {\n    if (event.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={styles.Overlay} onClick={this.handleBackdropClick}>\n        <div className={styles.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n","import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nconst API_KEY = '20008538-9b5c20cc133cf43381bf6ef09';\n\nconst fetchImages = async (query, currentPage) => {\n  const { data } = await axios.get(\n    `/?q=${query}&page=${currentPage}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  );\n\n  return data;\n};\n\nexport default fetchImages;\n","import React, { Component } from 'react';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Loader from './components/Loader';\nimport Message from './components/Message';\nimport Modal from './components/Modal';\n\nimport fetchImages from './api/api-services';\n\nclass App extends Component {\n  state = {\n    images: [],\n    currentPage: 1,\n    searchQuery: '',\n    isLoading: false,\n    showModal: false,\n    largeImage: '',\n    error: null,\n  };\n\n  // Если при обновлении запрос не равен между стейтами, тогда делаем фетч\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.getImages();\n    }\n  }\n\n  // Принимаем с формы запрос и пишем в стейт + сбрасываем после отправки стейт\n  onChangeQuery = query => {\n    this.setState({\n      images: [],\n      currentPage: 1,\n      searchQuery: query,\n      isLoading: false,\n      showModal: false,\n      largeImage: '',\n      error: null,\n    });\n  };\n\n  // Получаем дату из фетча\n  getImages = async () => {\n    const { currentPage, searchQuery } = this.state;\n\n    this.setState({\n      isLoading: true,\n    });\n\n    try {\n      const { hits } = await fetchImages(searchQuery, currentPage);\n\n      this.setState(prevState => ({\n        images: [...prevState.images, ...hits],\n        currentPage: prevState.currentPage + 1,\n      }));\n\n      if (currentPage !== 1) {\n        this.scrollOnLoadButton();\n      }\n    } catch (error) {\n      console.log('Smth wrong with App fetch', error);\n      this.setState({ error });\n    } finally {\n      this.setState({\n        isLoading: false,\n      });\n    }\n  };\n\n  // Получает полное изображение, пишет его в стейт и открывает модалку\n  handleGalleryItem = fullImageUrl => {\n    this.setState({\n      largeImage: fullImageUrl,\n      showModal: true,\n    });\n  };\n\n  // Переключение модалки\n  toggleModal = () => {\n    this.setState(state => ({\n      showModal: !state.showModal,\n    }));\n  };\n\n  // Скролл при клике на кнопку\n  scrollOnLoadButton = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n\n    // const { scrollTop, clientHeight } = document.documentElement;\n\n    // window.scrollTo({\n    //   top: scrollTop + clientHeight,\n    //   behavior: 'smooth',\n    // });\n  };\n\n  render() {\n    const { images, isLoading, showModal, largeImage, error } = this.state;\n    const needToShowLoadMore = images.length > 0 && images.length >= 12; // Нужны доп проверки;\n\n    return (\n      <>\n        <Searchbar onSearch={this.onChangeQuery} />\n\n        {images.length < 1 && (\n          <Message>\n            <h2>The gallery is empty 🙁</h2>\n            <p>Use search field!</p>\n          </Message>\n        )}\n\n        <ImageGallery images={images} onImageClick={this.handleGalleryItem} />\n\n        {needToShowLoadMore && <Button onClick={this.getImages} />}\n\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <button type=\"button\" onClick={this.toggleModal}>\n              Close\n            </button>\n            <img\n              src={largeImage}\n              alt=\"\"\n              style={{ maxHeight: '100vh', maxWidth: '100vw' }}\n            />\n          </Modal>\n        )}\n\n        {isLoading && <Loader />}\n\n        {error && (\n          <Message>\n            <h2>Oops! 😫</h2>\n            <p>\n              Sorry, something went wrong. Please try again, or{' '}\n              <a href=\"/\">refresh the page</a>.\n            </p>\n          </Message>\n        )}\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App.jsx';\n\nimport 'modern-normalize/modern-normalize.css';\nimport './App.module.scss';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"SearchForm\":\"SearchForm_SearchForm__2NWiS\",\"SearchForm-button\":\"SearchForm_SearchForm-button__2DtK-\",\"SearchForm-button-label\":\"SearchForm_SearchForm-button-label__9x3vu\",\"SearchForm-input\":\"SearchForm_SearchForm-input__1GlMn\"};"],"sourceRoot":""}